# Using with AI Agents

jack is the deployment platform for Claude Code. Here's how to get the most out of it.

## Bootstrap (Read This First)

If you're an AI agent helping a user with jack, or a user setting up jack for their AI agent:

### 1. Install jack

```bash
bun add -g @getjack/jack
```

Or: `npm install -g @getjack/jack`. A global install is required for MCP tools and agent hooks. `bunx` works for one-off project creation but won't set up MCP.

### 2. Set up MCP tools

```bash
jack mcp install
```

This configures jack as an MCP server for Claude Code and Claude Desktop. **You must restart your AI agent / IDE after this step** — MCP servers are loaded at startup.

### 3. Use jack, not wrangler

Jack manages all infrastructure. **Never run `wrangler` commands directly.** Use `jack` CLI commands or `mcp__jack__*` MCP tools instead.

### 4. Create or link a project

```bash
jack new my-project           # new project (scaffolds + deploys + installs agent hooks)
jack link                     # existing directory (connects to Jack Cloud + installs hooks)
```

### If you can't restart your session

MCP tools won't be available until the next session. Use `jack` CLI commands as a fallback.

First, get project context into the current conversation:

```bash
jack mcp context
```

This outputs the project's URL, deploy mode, services (databases, storage, etc.), and usage instructions. Then use CLI commands:

```bash
jack ship                     # deploy
jack logs                     # production logs
jack services db create       # add a database
jack services db query "..."  # query database
jack info                     # project status
```

---

## Claude Code

Claude Code is the primary agent for jack. Every project includes context files (`AGENTS.md`, `CLAUDE.md`) and a built-in MCP server for direct deployment and service management.

### Quick Start

```bash
jack new my-app
```

Claude Code can then use the MCP tools or CLI to deploy, add databases, and manage your project.

## MCP Server

jack includes a built-in [Model Context Protocol](https://modelcontextprotocol.io) server that lets AI agents deploy and manage projects directly.

### Setup

The MCP server is configured automatically when you run `jack new` or `jack mcp install`. It adds configuration to:

- Claude Code (`~/.claude/mcp.json`)
- Claude Desktop (`~/Library/Application Support/Claude/claude_desktop_config.json`)

**Restart your IDE / agent after setup.** MCP servers are loaded at startup — changes won't take effect until the next session.

To manually start the MCP server:

```bash
jack mcp serve
```

### Available Tools

#### Project Management

| Tool | Description |
|------|-------------|
| `create_project` | Create and deploy a new project from a template or fork |
| `deploy_project` | Deploy the current project |
| `get_project_status` | Check deployment status, URL, and last deploy time |
| `list_projects` | List all projects (filter by local, deployed, or cloud) |

#### Forking and Templates

The `create_project` tool supports three template modes:

```
Built-in:    template: "api"                 → starts from a builtin template
Fork own:    template: "my-project"          → forks your own deployed project
Fork public: template: "alice/cool-api"      → forks a published project
```

All modes create a fully deployed, independent copy.

#### Database

| Tool | Description |
|------|-------------|
| `create_database` | Create a database for a project |
| `list_databases` | List project databases |
| `execute_sql` | Execute SQL queries (read-only by default, `allow_write` for mutations) |

#### Vector Search

| Tool | Description |
|------|-------------|
| `create_vectorize_index` | Create a vector index for similarity search |
| `list_vectorize_indexes` | List project indexes |
| `get_vectorize_info` | Get index metadata (dimensions, metric, count) |
| `delete_vectorize_index` | Delete an index |

#### Storage

| Tool | Description |
|------|-------------|
| `create_storage_bucket` | Create a storage bucket |
| `list_storage_buckets` | List project buckets |
| `get_storage_info` | Get bucket info |
| `delete_storage_bucket` | Delete a bucket |

#### Observability

| Tool | Description |
|------|-------------|
| `start_log_session` | Start a 1-hour real-time log session |
| `tail_logs` | Collect a short sample of live log events |

#### Scheduling (Cron)

| Tool | Description |
|------|-------------|
| `create_cron` | Create a cron schedule (minimum 15 min interval) |
| `list_crons` | List project cron schedules |
| `delete_cron` | Delete a cron schedule |
| `test_cron` | Validate expression and show next 5 scheduled times |

#### Custom Domains

| Tool | Description |
|------|-------------|
| `list_domains` | List all custom domains and their status |
| `connect_domain` | Reserve a custom domain slot |
| `assign_domain` | Assign a domain to a project |
| `unassign_domain` | Unassign a domain from its project |
| `disconnect_domain` | Fully remove a domain |

### Multi-Project Management

Most tools accept a `project_path` parameter, so an agent can manage multiple projects in a single session. Tool calls can run in parallel — a single prompt can launch several projects simultaneously, each returning a live URL.

From there, you can keep working across all of them: add databases, seed data, configure cron jobs, check logs — all without switching context.

```
create_project    name: "users-api", template: "api"
create_project    name: "admin-dash", template: "miniapp"
deploy_project    project_path: "/projects/users-api"
execute_sql       project_path: "/projects/users-api", sql: "CREATE TABLE users ..."
create_cron       project_path: "/projects/admin-dash", expression: "0 * * * *"
tail_logs         project_path: "/projects/users-api"
```

## Other Agents

jack also works with other AI coding agents (Codex, Cursor, etc.) via CLI commands and `--json` output. The MCP server is compatible with any agent that supports the Model Context Protocol.

## AGENTS.md

Every jack project includes an `AGENTS.md` file with instructions for AI agents. This helps your coding agent understand your project structure.

## Preferred Agent

jack can automatically open your preferred coding agent after creating a project:

Set your preferred agent:

```bash
jack agents prefer claude-code
```

Available: `claude-code`, `codex`.

Now `jack new` will open your agent automatically:

```bash
jack new my-app
```

## Tips for AI-Assisted Development

1. **Let the agent deploy** — agents can run `jack ship` directly
2. **Use MCP tools** — agents with MCP access can create, deploy, query, and manage without the CLI
3. **Fork as a starting point** — use `create_project` with a template to fork existing projects
4. **Go wide** — launch multiple projects in one prompt, manage them all from one session
5. **Check AGENTS.md** — customize it for your project's specific patterns
