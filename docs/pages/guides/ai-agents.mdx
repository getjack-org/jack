# Using with AI Agents

jack is the deployment platform for Claude Code. Here's how to get the most out of it.

## Claude Code

Claude Code is the primary agent for jack. Every project includes context files (`AGENTS.md`, `CLAUDE.md`) and there's a built-in MCP server with 27 tools for direct deployment and service management.

### Quick Start

Install jack and configure MCP in one command:

```bash
curl -fsSL docs.getjack.org/install.sh | bash
```

Start a new Claude Code session (or `/mcp reconnect jack`), then ask Claude to deploy something.

**No terminal?** Use the remote MCP server from Claude Desktop or Claude.ai:

```
https://mcp.getjack.org/mcp
```

The remote server has 10 tools (deploy, projects, databases, logs, files). Install locally for the full 27-tool experience.

## Authentication

Agents need to authenticate before deploying. There are three ways, depending on your setup.

### Pre-existing token (simplest)

If you already have an API token, set it as an environment variable. No login needed.

```bash
export JACK_API_TOKEN=jkt_abc123...
```

Create tokens with `jack tokens create`.

### Magic auth (headless, no browser)

For agents that can send/receive email, or for human-supervised setups where a human can read the code from email.

**Two-step flow (fully non-interactive):**

```bash
jack login --email agent@example.com
```

This sends a 6-digit verification code to the email and exits. Then:

```bash
jack login --email agent@example.com --code 847291
```

This verifies the code, registers the account, and creates a `jkt_*` API token. The CLI is authenticated for all future commands. The token is also printed to stdout for programmatic capture.

**Interactive flow (human-supervised):**

If running in a terminal, `jack login --email you@example.com` will prompt for the code inline — the human reads it from email and pastes it.

**Environment variables:**

| Variable | Purpose |
|----------|---------|
| `JACK_EMAIL` | Same as `--email` flag — triggers magic auth automatically |
| `JACK_API_TOKEN` | Skip login entirely, use an existing token |
| `CI=true` | Forces non-interactive mode (no prompts) |

### Browser login (interactive humans)

Running `jack login` without `--email` opens a browser for OAuth login. This is the default for interactive terminal sessions. If no browser is available, it fails fast with instructions to use `--email` instead.

## MCP Server

jack includes a built-in [Model Context Protocol](https://modelcontextprotocol.io) server that lets AI agents deploy and manage projects directly.

### Setup

The install script configures MCP automatically for all detected editors:

- Claude Code (`~/.claude.json`)
- Claude Desktop (`~/Library/Application Support/Claude/claude_desktop_config.json`)
- Cursor (`~/.cursor/mcp.json`)

To manually configure or start the MCP server:

```bash
jack mcp install   # Write config to detected editors
jack mcp serve     # Start MCP server manually
```

### Available Tools

#### Project Management

| Tool | Description |
|------|-------------|
| `create_project` | Create and deploy a new project from a template or fork |
| `deploy_project` | Deploy the current project |
| `get_project_status` | Check deployment status, URL, and last deploy time |
| `list_projects` | List all projects (filter by local, deployed, or cloud) |

#### Forking and Templates

The `create_project` tool supports three template modes:

```
Built-in:    template: "api"                 → starts from a builtin template
Fork own:    template: "my-project"          → forks your own deployed project
Fork public: template: "alice/cool-api"      → forks a published project
```

All modes create a fully deployed, independent copy.

#### Database

| Tool | Description |
|------|-------------|
| `create_database` | Create a database for a project |
| `list_databases` | List project databases |
| `execute_sql` | Execute SQL queries (read-only by default, `allow_write` for mutations) |

#### Vector Search

| Tool | Description |
|------|-------------|
| `create_vectorize_index` | Create a vector index for similarity search |
| `list_vectorize_indexes` | List project indexes |
| `get_vectorize_info` | Get index metadata (dimensions, metric, count) |
| `delete_vectorize_index` | Delete an index |

#### Storage

| Tool | Description |
|------|-------------|
| `create_storage_bucket` | Create a storage bucket |
| `list_storage_buckets` | List project buckets |
| `get_storage_info` | Get bucket info |
| `delete_storage_bucket` | Delete a bucket |

#### Observability

| Tool | Description |
|------|-------------|
| `start_log_session` | Start a 1-hour real-time log session |
| `tail_logs` | Collect a short sample of live log events |

#### Scheduling (Cron)

| Tool | Description |
|------|-------------|
| `create_cron` | Create a cron schedule (minimum 15 min interval) |
| `list_crons` | List project cron schedules |
| `delete_cron` | Delete a cron schedule |
| `test_cron` | Validate expression and show next 5 scheduled times |

#### Custom Domains

| Tool | Description |
|------|-------------|
| `list_domains` | List all custom domains and their status |
| `connect_domain` | Reserve a custom domain slot |
| `assign_domain` | Assign a domain to a project |
| `unassign_domain` | Unassign a domain from its project |
| `disconnect_domain` | Fully remove a domain |

### Multi-Project Management

Most tools accept a `project_path` parameter, so an agent can manage multiple projects in a single session. Tool calls can run in parallel — a single prompt can launch several projects simultaneously, each returning a live URL.

From there, you can keep working across all of them: add databases, seed data, configure cron jobs, check logs — all without switching context.

```
create_project    name: "users-api", template: "api"
create_project    name: "admin-dash", template: "miniapp"
deploy_project    project_path: "/projects/users-api"
execute_sql       project_path: "/projects/users-api", sql: "CREATE TABLE users ..."
create_cron       project_path: "/projects/admin-dash", expression: "0 * * * *"
tail_logs         project_path: "/projects/users-api"
```

## Other Agents

jack also works with other AI coding agents (Codex, Cursor, etc.) via CLI commands and `--json` output. The MCP server is compatible with any agent that supports the Model Context Protocol.

## AGENTS.md

Every jack project includes an `AGENTS.md` file with instructions for AI agents. This helps your coding agent understand your project structure.

## Preferred Agent

jack can automatically open your preferred coding agent after creating a project:

Set your preferred agent:

```bash
jack agents prefer claude-code
```

Available: `claude-code`, `codex`.

Now `jack new` will open your agent automatically:

```bash
jack new my-app
```

## Tips for AI-Assisted Development

1. **Let the agent deploy** — agents can run `jack ship` directly
2. **Use MCP tools** — agents with MCP access can create, deploy, query, and manage without the CLI
3. **Fork as a starting point** — use `create_project` with a template to fork existing projects
4. **Go wide** — launch multiple projects in one prompt, manage them all from one session
5. **Check AGENTS.md** — customize it for your project's specific patterns
